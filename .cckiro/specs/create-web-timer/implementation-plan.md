# Web タイマー実装計画書

## 実装順序と TDD 戦略

### フェーズ 1: プロジェクトセットアップ

1. **Vite プロジェクトの初期化**

   - Tailwind CSS v4 のインストールと設定
   - Vitest の設定
   - 必要なパッケージのインストール

2. **基本構造の作成**
   - ディレクトリ構造の作成
   - index.css に@tailwind ディレクティブを追加

### フェーズ 2: ユーティリティ関数の TDD 実装

1. **timeUtils.ts のテスト作成**

   - `formatTime`のテストケース作成
   - `normalizeTime`のテストケース作成
   - `getTotalSeconds`のテストケース作成
   - `isValidTime`のテストケース作成

2. **timeUtils.ts の実装**
   - 各関数をテストを通るように実装

### フェーズ 3: カスタムフックの TDD 実装

1. **useTimer.ts のテスト作成**

   - 初期状態のテスト
   - 時間設定のテスト
   - タイマー開始・停止のテスト
   - クリア機能のテスト

2. **useTimer.ts の実装**
   - 状態管理ロジックの実装
   - タイマーロジックの実装（requestAnimationFrame 使用）

### フェーズ 4: コンポーネントの TDD 実装（下位から上位へ）

#### 4.1 TimeDisplay コンポーネント

1. **テスト作成**

   - 時間表示のフォーマットテスト
   - 各桁が 2 桁固定で表示されることのテスト

2. **実装**
   - Props の型定義
   - 表示ロジックとスタイリング

#### 4.2 TimeAdjuster コンポーネント

1. **テスト作成**

   - 増減ボタンのクリックテスト
   - 上限・下限のバリデーションテスト

2. **実装**
   - ボタンの配置とイベントハンドリング
   - バリデーションロジック

#### 4.3 QuickAddButtons コンポーネント

1. **テスト作成**

   - 各ボタンのクリックで正しい時間が追加されるテスト

2. **実装**
   - ボタンの配置とイベントハンドリング

#### 4.4 ControlButtons コンポーネント

1. **テスト作成**

   - スタートボタンの活性/非活性テスト
   - クリアボタンのテスト

2. **実装**
   - ボタンの状態管理とイベントハンドリング

#### 4.5 Timer コンポーネント（統合）

1. **テスト作成**

   - 全体の統合テスト
   - タイマー終了時の通知テスト

2. **実装**
   - 子コンポーネントの統合
   - トースト通知の実装

### フェーズ 5: 最終調整

1. **レスポンシブデザインの確認**

   - モバイル表示の最適化
   - タップ領域の確認

2. **パフォーマンステスト**

   - タイマーの精度確認
   - 再レンダリングの最適化

3. **アクセシビリティ**
   - キーボード操作の確認
   - スクリーンリーダー対応

## 実装時の注意事項

### TDD サイクル

1. **Red**: 失敗するテストを書く
2. **Green**: テストを通る最小限の実装
3. **Refactor**: コードの改善

### コーディング規約

- 型安全性を重視（any の使用禁止）
- const を優先使用
- 非破壊的操作を優先
- エラーハンドリングの実装

### Git 戦略

- 機能ごとにコミット
- わかりやすいコミットメッセージ
- テストとセットでコミット

## 推定作業時間

- フェーズ 1: 30 分
- フェーズ 2: 1 時間
- フェーズ 3: 1 時間
- フェーズ 4: 3 時間
- フェーズ 5: 30 分

合計: 約 6 時間
